<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icons/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icons/apple-touch-icon-167x167.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#007AFF">
    <title>Goalaroo - Track Your Child's Progress</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icons/favicon-32x32.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Goalaroo">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Authentication Screen -->
    <div id="auth-screen" class="screen">
        <div class="auth-container">
            <div class="logo">
                <div class="logo-emoji">ü¶ò</div>
                <h1>Goalaroo</h1>
                <p>Track your child's progress with fun! <span class="sparkle">üéâ</span></p>
            </div>
            <div class="auth-form">
                <div class="form-header">
                    <h2>Welcome Back</h2>
                    <p>Enter your email to get started</p>
                </div>
                <input type="email" id="email" placeholder="Enter your email" required>
                <button id="send-code-btn" class="btn-primary">
                    <span class="btn-icon">‚ú®</span>
                    Send Magic Code
                </button>
            </div>
            <div id="code-section" class="auth-form" style="display: none;">
                <div class="form-header">
                    <h2>Almost There!</h2>
                    <p>Check your email for the magic code</p>
                </div>
                <input type="text" id="code" placeholder="Enter 6-digit code" maxlength="6">
                <button id="verify-code-btn" class="btn-primary">
                    <span class="btn-icon">üîê</span>
                    Verify Code
                </button>
            </div>
            <div class="auth-footer">
                <span class="sparkle">üåà</span> Welcome to a world of positive goals!
            </div>
        </div>
    </div>

    <!-- Dashboard Screen -->
    <div id="dashboard" class="screen" style="display: none;">
        <header class="dashboard-header">
            <div class="header-top">
                <div class="app-brand">
                    <div class="app-logo">
                        <span class="app-icon">ü¶ò</span>
                        <h1>Goalaroo</h1>
                    </div>
                    <div class="user-controls">
                        <span id="user-email" class="user-email"></span>
                        <button id="logout-btn" class="btn-icon" title="Logout">
                            <span>üö™</span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="child-selector">
                <div class="child-avatars" id="child-avatars">
                    <!-- Child avatars will be dynamically added here -->
                </div>
            </div>
        </header>

        <main class="dashboard-main">
            <div class="goals-container">
                <div class="goals-header">
                    <div class="goals-title">
                        <h2>Goals</h2>
                        <span class="goals-count" id="goals-count">0 goals</span>
                    </div>
                    <button id="add-goal-btn" class="btn-primary">
                        <span class="btn-icon">‚ûï</span>
                        Add Goal
                    </button>
                </div>
                <div id="goals-container" class="goals-list">
                    <!-- Goals will be dynamically added here -->
                </div>
            </div>
        </main>
        
        <footer class="dashboard-footer">
            <div class="footer-content">
                <span class="app-version">v${APP_VERSION}</span>
            </div>
        </footer>
    </div>

    <!-- Add Child Modal -->
    <div id="add-child-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Child</h3>
                <button class="close-btn" onclick="hideModal('add-child-modal')">‚úï</button>
            </div>
            <form id="add-child-form">
                <div class="form-group">
                    <label for="child-name">Child's Name</label>
                    <input type="text" id="child-name" name="name" required>
                </div>
                <div class="form-group">
                    <label>Choose Avatar</label>
                    <div class="icon-picker" id="add-child-avatar">
                        <!-- Avatars will be added dynamically -->
                    </div>
                </div>
                <div class="form-group">
                    <label>Choose Color</label>
                    <div class="color-picker" id="add-child-color">
                        <!-- Colors will be added dynamically -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="hideModal('add-child-modal')">Cancel</button>
                    <button type="submit" class="btn-primary">Add Child</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Child Modal -->
    <div id="edit-child-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Child</h3>
                <button class="close-btn" onclick="hideModal('edit-child-modal')">‚úï</button>
            </div>
            <form id="edit-child-form">
                <div class="form-group">
                    <label for="edit-child-name">Child's Name</label>
                    <input type="text" id="edit-child-name" name="name" required>
                </div>
                <div class="form-group">
                    <label>Choose Avatar</label>
                    <div class="icon-picker" id="edit-child-avatar">
                        <!-- Avatars will be added dynamically -->
                    </div>
                </div>
                <div class="form-group">
                    <label>Choose Color</label>
                    <div class="color-picker" id="edit-child-color">
                        <!-- Colors will be added dynamically -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="hideModal('edit-child-modal')">Cancel</button>
                    <button type="submit" class="btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Goal Modal -->
    <div id="add-goal-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Create New Goal</h3>
                <button class="close-btn" onclick="hideModal('add-goal-modal')">‚úï</button>
            </div>
            <form id="add-goal-form">
                <div class="form-group">
                    <label for="goal-name">Goal Name</label>
                    <input type="text" id="goal-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="goal-type">Goal Type</label>
                    <select id="goal-type" name="type" required>
                        <option value="daily">Daily Goal</option>
                        <option value="weekly">Weekly Goal</option>
                        <option value="timer">Timer Goal</option>
                    </select>
                </div>
                
                <!-- Daily/Weekly Goal Options -->
                <div class="form-group" id="recurring-options" style="display: none;">
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="goal-repeat" name="repeat">
                            Repeat automatically
                        </label>
                    </div>
                </div>
                
                <!-- Timer Goal Options -->
                <div class="form-group" id="timer-options" style="display: none;">
                    <label for="timer-duration">Duration</label>
                    <div class="duration-input">
                        <input type="number" id="timer-duration" name="duration" min="1" placeholder="e.g., 30">
                        <select id="timer-unit" name="unit">
                            <option value="minutes">Minutes</option>
                            <option value="hours">Hours</option>
                        </select>
                    </div>
                </div>
                



                <div class="form-group">
                    <label>Choose Color</label>
                    <div class="color-picker" id="goal-color">
                        <!-- Colors will be added dynamically -->
                    </div>
                </div>
                <div class="form-group">
                    <label>Choose Children</label>
                    <div id="goal-children" class="child-multiselect">
                        <!-- Child options will be added dynamically -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="hideModal('add-goal-modal')">Cancel</button>
                    <button type="submit" class="btn-primary">Create Goal</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Goal Modal -->
    <div id="edit-goal-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Goal</h3>
                <button class="close-btn" onclick="hideModal('edit-goal-modal')">‚úï</button>
            </div>
            <form id="edit-goal-form">
                <div class="form-group">
                    <label for="edit-goal-name">Goal Name</label>
                    <input type="text" id="edit-goal-name" name="name" required>
                </div>
                
                <!-- Daily/Weekly Goal Options -->
                <div class="form-group" id="edit-recurring-options" style="display: none;">
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="edit-goal-repeat" name="repeat">
                            Repeat automatically
                        </label>
                    </div>
                </div>
                
                <!-- Timer Goal Options -->
                <div class="form-group" id="edit-timer-options" style="display: none;">
                    <label for="edit-timer-duration">Duration</label>
                    <div class="duration-input">
                        <input type="number" id="edit-timer-duration" name="duration" min="1" placeholder="e.g., 30">
                        <select id="edit-timer-unit" name="unit">
                            <option value="minutes">Minutes</option>
                            <option value="hours">Hours</option>
                        </select>
                    </div>
                </div>
                

                
                <div class="form-group">
                    <label>Choose Color</label>
                    <div class="color-picker" id="edit-goal-color">
                        <!-- Colors will be added dynamically -->
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="hideModal('edit-goal-modal')">Cancel</button>
                    <button type="submit" class="btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Goal Detail Modal -->
    <div id="goal-detail-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Goal Details</h3>
                <button class="close-btn" onclick="hideModal('goal-detail-modal')">‚úï</button>
            </div>
            <div class="modal-body">
                <!-- Goal details will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Completion History Modal -->
    <div id="completion-history-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Completion History</h3>
                <button class="close-btn" onclick="hideModal('completion-history-modal')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="completion-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="total-completions">0</div>
                        <div class="stat-label">Total Completions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="current-streak">0</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="longest-streak">0</div>
                        <div class="stat-label">Longest Streak</div>
                    </div>
                </div>
                
                <div class="completion-filters">
                    <button class="filter-btn active" data-filter="all">All Time</button>
                    <button class="filter-btn" data-filter="week">This Week</button>
                    <button class="filter-btn" data-filter="month">This Month</button>
                </div>
                
                <div class="completion-insights" id="completion-insights" style="display: none;">
                    <h4>üìà Insights</h4>
                    <div class="insights-grid">
                        <div class="insight-item">
                            <div class="insight-label">Average per day</div>
                            <div class="insight-value" id="avg-per-day">-</div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-label">Best day</div>
                            <div class="insight-value" id="best-day">-</div>
                        </div>
                        <div class="insight-item">
                            <div class="insight-label">Notes added</div>
                            <div class="insight-value" id="notes-count">-</div>
                        </div>
                    </div>
                </div>
                
                <div class="completion-list" id="completion-list">
                    <!-- Completion history will be populated dynamically -->
                </div>
                
                <div class="completion-empty" id="completion-empty" style="display: none;">
                    <div class="empty-icon">üìä</div>
                    <h4>No completions yet</h4>
                    <p>Complete this goal to see your progress history!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Network Status -->
    <div id="network-status" class="status online" style="position: fixed; top: 10px; right: 10px; z-index: 1000; padding: 5px 10px; border-radius: 4px; font-size: 12px;">
        üü¢ Online
    </div>

    <!-- Load version information -->
    <script src="version.js"></script>
    
    <!-- Main application script -->
    <script src="app.js"></script>
</body>
</html>
